#!/bin/sh

set -o errexit

branch=$(git rev-parse --abbrev-ref HEAD)

if test "$branch" == "main"
then
    echo "Ignoring attempt to create a PR when on $branch"
    exit 1
fi

set -o xtrace

git push --set-upstream origin HEAD
open "$(git remote get-url origin | sed 's/.git$//')/pull/new/$branch"
